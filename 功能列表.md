# 立创商城爬虫系统 - 功能列表

> **技术栈**: Vue 3 + Spring Boot + MySQL + Redis
> **系统定位**: 立创商城产品数据采集、管理、导出系统

---

## 一、爬虫核心功能

- **分类同步**: 从立创官方API同步所有一级/二级分类信息
- **全量爬取**: 爬取所有分类下的产品数据
- **按分类爬取**: 选择指定分类进行爬取
- **批量爬取**: 批量选择多个分类并行爬取
- **爬虫控制**: 启动/停止/恢复爬虫任务
- **实时监控**: 查看任务队列状态、进度、待处理任务
- **健康检查**: 检查爬虫系统各模块运行状态
- **分类统计**: 查看各分类的爬取统计信息

---

## 二、产品管理功能

- **产品列表**: 分页查询、多条件搜索(编号/品牌/型号/分类/库存)
- **产品详情**: 查看单个产品的完整信息
- **产品新增**: 手动添加产品
- **产品编辑**: 修改产品信息
- **产品删除**: 单个或批量删除
- **品牌过滤**: 按品牌查询产品
- **分类过滤**: 按一级/二级分类查询产品
- **产品统计**: 产品总数、库存统计
- **资源查询**: 查看产品的图片和PDF资源

---

## 三、分类管理功能

### 一级分类
- 分页查询、列表查询
- 新增/编辑/删除一级分类
- 查看一级分类详情

### 二级分类
- 分页查询、按一级分类筛选
- 新增/编辑/删除二级分类
- 查看二级分类详情
- 店铺分类码管理(为不同店铺设置分类映射)

---

## 四、店铺管理功能

- **店铺列表**: 分页查询、按名称和运费模板过滤
- **店铺详情**: 查看单个店铺信息
- **店铺新增**: 添加新店铺
- **店铺编辑**: 修改店铺信息
- **店铺删除**: 单个或批量删除
- **按名称查询**: 根据店铺名称查询
- **按模板查询**: 根据运费模板ID查询

---

## 五、图片链接管理功能

- **图片链接列表**: 分页查询、按图片名称/店铺/链接过滤
- **按店铺查询**: 查询指定店铺的所有图片
- **按图片名称查询**: 查询指定图片在各店铺的链接
- **图片链接新增**: 添加新的图片链接
- **图片链接编辑**: 修改图片链接
- **图片链接删除**: 单个或批量删除
- **批量导入**: 批量保存或更新图片链接
- **统计功能**: 统计店铺图片数量

---

## 六、数据导出功能

- **导出所有产品**: 将全部产品导出为Excel
- **导出选定产品**: 按条件筛选后导出Excel或CSV
- **按分类导出**: 指定分类导出产品数据
- **文件下载**: 下载已生成的导出文件

---

## 七、任务日志与监控

### 任务日志
- 分页查询任务日志(Redis缓存)
- 查询持久化日志(数据库)
- 获取最新日志
- 实时任务进度查询
- 活跃任务状态监控
- 清理过期日志
- 任务统计(成功数/错误数/活跃任务数)

### 系统监控
- **性能指标监控**: 吞吐量、响应时间、CPU、内存使用
- **性能历史数据**: 查看指定时间段的历史数据
- **错误分布统计**: 各类错误的发生次数和占比
- **分类爬取统计**: 各分类的爬取进度和成功率
- **内存使用统计**: JVM堆内存、非堆内存详情
- **任务调度器统计**: 任务队列执行情况
- **爬虫指标**: 请求成功率、平均响应时间
- **系统健康状态**: 综合检查各模块健康状态

---

## 八、数据可视化

- **实时仪表板**: 爬虫状态、系统状态可视化展示
- **性能图表**: 实时性能指标图表
- **进度监控面板**: 任务进度可视化
- **实时日志面板**: 任务日志实时展示
- **任务流程图**: 任务执行流程可视化

---

## 九、系统工具

- **系统健康检查**: 检查后端服务、数据库、Redis连接状态
- **系统统计**: 获取产品总数、分类数、店铺数等
- **API列表**: 查看所有可用接口
- **资源浏览**: 浏览产品资源(图片/PDF)文件夹结构
- **资源下载**: 下载产品的图片或PDF文件
- **下载监控**: 监控文件下载队列状态
- **分类补丁**: 从产品数据中提取并补丁缺失的分类

---

## 前端页面结构

| 页面 | 功能 |
|-----|------|
| 仪表板 | 分类同步、爬虫控制、系统状态监控 |
| 产品管理 | 产品CRUD、搜索过滤、资源查看 |
| 店铺管理 | 店铺信息维护 |
| 分类管理 | 一级/二级分类管理、店铺分类码配置 |
| 产品资源管理 | 资源浏览和下载 |
| 数据可视化 | 爬虫监控、性能指标、错误分析 |

---

## 核心特性

1. ✅ **实时爬虫控制** - 支持全量、按分类、批量三种爬取模式
2. ✅ **完整的CRUD框架** - 覆盖所有主要数据实体
3. ✅ **高级查询能力** - 多条件组合搜索、分页、聚合查询
4. ✅ **多格式导出** - Excel、CSV导出功能
5. ✅ **实时监控系统** - Redis + WebSocket实现任务日志实时推送
6. ✅ **多维度统计** - 性能指标、错误分析、进度监控
7. ✅ **可视化仪表板** - 实时图表、进度条、流程图展示


# P0 - 核心爬虫与数据修复 (Critical / Blocker)

优先级说明: 此类问题直接影响数据完整性、准确性和系统稳定性，必须优先解决。

[ ] 爬虫选区UI升级

树形结构: 自定义爬取选择页改为一级/二级（/三级）树形折叠结构。

默认状态: 一级分类默认不全选，避免误操作。

[ ] 爬虫选择记忆功能

[ ] 三级分类兼容性修复 (CRITICAL)

现状: 网站结构变更，若二级分类下存在三级分类，会导致二级及以下产品全部漏爬。

要求: 升级爬虫逻辑，支持递归遍历三级分类，确保无死角抓取。

[ ] 突破5000条列表限制 (CRITICAL)

现状: 网站列表页仅展示前5000条，导致大分类数据缺失（N/5000）。

要求: 实现“筛选拆分”爬取策略（如通过价格区间、品牌、封装等参数切片），突破单页限制，确保获取全量数据。

[ ] 分类名称持久化修复

现状: 系统重启后，手动修改的中文分类名称被API同步覆盖。

要求: 数据库增加字段区分source_name（源名称）和custom_name（自定义名称），同步逻辑改为“仅更新未修改过的分类”，确保用户编辑的中文名称永久保存。

[ ] 价格阶梯扩展

要求: 数据库及解析逻辑从支持5级阶梯价扩展至 6级阶梯价。

[ ] 图片命名与逻辑重构

命名规则: 变更为 编号_图类.jpg (例: C123456_front.jpg)。

下载策略: 移除back图的优先权，新增package图逻辑。优先级调整为: front > blank > package > back > 无。

[ ] PDF 命名与开关

命名规则: 变更为 产品编号.pdf (例: C123456789.pdf)。

功能开关: 新增全局配置项 ENABLE_PDF_DOWNLOAD，默认为 False (暂停下载)，待全站产品爬取完毕后可手动开启。


# P1 - 新增模块与体验优化 (Major / Feature)

优先级说明: 在P0问题解决，数据抓取准确无误后，立即着手开发的功能模块。

[ ] 新增：图片链接管理独立模块

独立页面: 类似产品管理的CRUD页面。

数据模型: 支持 One-to-Many 关系（一张图片 -> 关联N个店铺 -> 对应N个链接）。

导入功能: 支持从本地Excel导入，模板格式：[店铺名称, 产品编号, 图片名称, 图片链接]。


# P2高级导出独立模块

[ ] 新增：高级导出独立模块

独立页面: 提供复杂的导出配置表单。

筛选维度: 店铺选择、产品选择、价格折扣设置。

导出内容: 聚合数据，包含 店铺运费模板、分类码、自定义图片链接、基础产品信息。
